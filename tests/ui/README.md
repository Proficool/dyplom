# UI-тесты для приложения "Менеджер задач"

В этой директории содержатся UI-тесты для веб-приложения "Менеджер задач". Тесты используют Selenium WebDriver для автоматизации взаимодействия с браузером.

## Структура файлов

- `test_ex.py` - тесты для запуска в Docker-контейнере
- `test_ex_local.py` - тесты для локального запуска на рабочей станции разработчика

## Варианты запуска тестов

### 1. Запуск в Docker-контейнере

Этот вариант подходит для CI/CD пайплайнов и обеспечивает изолированную среду выполнения.

```bash
# Запуск конкретного теста
docker-compose run --rm -e TEST_PATH=tests/ui/test_ex.py -e TEST_ARGS='--alluredir=allure' test

# Запуск с дополнительными параметрами pytest
docker-compose run --rm -e TEST_PATH=tests/ui -e TEST_ARGS='-v --alluredir=allure' test
```

### 2. Локальный запуск

Этот вариант подходит для разработки и отладки тестов на локальной машине.

#### Предварительные требования

1. Установленный Python 3.9+
2. Установленный Google Chrome
3. Установленные зависимости:

```bash
pip install -r tests/requirements.txt
```

#### Запуск тестов

```bash
# Запуск локального теста с открытием браузера
pytest tests/ui/test_ex_local.py -v

# Запуск с генерацией отчета Allure
pytest tests/ui/test_ex_local.py --alluredir=./allure-results
allure generate ./allure-results -o allure-report --clean
allure open allure-report
```

## Особенности реализации

### Контейнерные тесты (`test_ex.py`)

- Используют предустановленный ChromeDriver в контейнере
- Запускаются в headless-режиме (без графического интерфейса)
- Обращаются к приложению по имени сервиса Docker: `http://web:5000`

### Локальные тесты (`test_ex_local.py`)

- Используют WebDriver Manager для автоматической загрузки подходящего ChromeDriver
- Запускаются с видимым интерфейсом браузера для удобства отладки
- Обращаются к приложению по localhost: `http://localhost:5000`

## Советы по отладке

1. При локальном запуске вы увидите открывающийся браузер Chrome, что позволяет наблюдать за выполнением теста.
2. Тесты создают скриншот страницы в файл `screenshot.png`, который можно использовать для анализа проблем.
3. Для более подробного вывода используйте флаг `-v` при запуске pytest.

## Расширение тестов

Для добавления новых тестов:

1. Создайте новый файл с префиксом `test_` в этой директории
2. Для контейнерных тестов используйте шаблон из `test_ex.py`
3. Для локальных тестов используйте шаблон из `test_ex_local.py`